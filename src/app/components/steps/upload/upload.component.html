<div class="container">
  <p-card>
    <p-fileUpload #uploader
      name="documents[]"
      [url]="uploadUrl"
      (onBeforeUpload)="onBeforeUpload($event)"
      (onUpload)="onUpload($event)"
      [multiple]="true"
      accept=".pdf"
      maxFileSize="1000000"
      fileLimit="3"
      mode="advanced"
      method="post"
      chooseLabel="Allega"
      chooseStyleClass="p-button-raised"
      uploadLabel="Invia"
      uploadStyleClass="p-button-raised p-button-info"
      cancelLabel="Annulla"
      cancelStyleClass="p-button-raised p-button-danger"
      removeStyleClass="p-button-raised p-button-warning">
      <ng-template pTemplate="header" let-files let-chooseCallback="chooseCallback" let-clearCallback="clearCallback">
        <div class="flex flex-wrap justify-content-between align-items-center flex-1 gap-2">
          <div class="flex gap-2">
            <button #chooseButton [disabled]="files.length >= 3" (click)="chooseCallback(); chooseButton.blur();"
                    pButton type="button" class="p-button-primary p-button-raised" label="Allega" icon="pi pi-plus"></button>
            <p-button icon="pi pi-times" label="Annulla" severity="danger" (onClick)="clearCallback()"
                      [disabled]="!files || files.length === 0" [raised]="true"/>
          </div>
        </div>
      </ng-template>

    </p-fileUpload>
    <ng-template pTemplate="footer">
      <div class="footer">
        <button #backButton pButton type="button" class="p-button-info p-button-raised" label="Indietro"
                (click)="backButton.blur();" routerLink="/booking/date"></button>

        <button #bookButton pButton type="button" class="p-button-success p-button-raised" label="Prenota"
                (click)="onBook(uploader); bookButton.blur();"></button>
      </div>
    </ng-template>
  </p-card>
</div>
